<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#f1f5f9">
    <title>BMS - Business Management System</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .login-wrapper {
            display: flex;
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            gap: 4rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .brand-section {
            flex: 1;
            color: var(--text-main);
        }

        .main-heading {
            font-size: 3.5rem;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            /* Use Theme Colors */
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            /* text-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); Removed dark shadow for light theme */
        }

        .tag-line {
            font-size: 1.5rem;
            color: var(--accent-color);
            font-weight: 500;
            margin-bottom: 2rem;
            display: block;
        }

        .description {
            font-size: 1.1rem;
            color: var(--text-muted);
            line-height: 1.6;
            max-width: 600px;
        }

        .auth-card {
            width: 100%;
            max-width: 380px;
            /* Reduced from 450px */
            padding: 1.5rem;
            /* Further reduced padding */
            flex-shrink: 0;
            background: rgba(30, 41, 59, 0.6);
            /* Slightly more transparent */
            backdrop-filter: blur(20px);
        }

        /* Compact Form Elements for Auth Card */
        .auth-card .form-group {
            margin-bottom: 0.8rem;
            /* Reduced from 1.5rem */
        }

        .auth-card label {
            margin-bottom: 0.2rem;
            font-size: 0.9rem;
        }

        .auth-card input {
            padding: 0.6rem;
            /* Slightly smaller input */
        }

        .auth-card h2 {
            margin-bottom: 1rem !important;
            /* Reduce header margin */
        }

        /* Mobile Responsive */
        @media (max-width: 900px) {
            .login-wrapper {
                flex-direction: column;
                text-align: center;
                gap: 2rem;
            }

            .brand-section {
                padding-top: 2rem;
            }

            .main-heading {
                font-size: 2.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="login-wrapper">
        <!-- BRAND SECTION (LEFT) -->
        <div class="brand-section">
            <h1 class="main-heading">Cloud Base Business Management System</h1>

            <p class="description">
                "اپنے کاروبار کو جدید اسٹاک مینجمنٹ کے ساتھ مضبوط بنائیں — سیلز ٹریک کریں،
                وینڈرز کو منظم کریں اور فوری رپورٹس حاصل کریں،
                کہیں سے بھی۔" </p>

            <!-- Banner Holder -->
            <div id="mainBanner"
                style="max-width: 100%; width: 720px; height: 120px; background: rgba(255,255,255,0.05); margin-top: 3rem; border-radius: 12px; overflow: hidden; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(255,255,255,0.1);">
                <span style="color: rgba(255,255,255,0.3); font-size: 0.9rem;">Banner Ad Area (720x120)</span>
            </div>
        </div>

        <!-- LOGIN SECTION (RIGHT) -->
        <div class="glass-panel auth-card">
            <h2 class="brand-title" style="margin-bottom: 1.5rem; font-size: 1.8rem">Welcome Back</h2>

            <form id="loginForm">
                <div class="form-group">
                    <label>Company Name (or Admin)</label>
                    <input type="text" id="loginUser" required placeholder="Enter User Name">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPass" required placeholder="Enter password">
                </div>
                <button type="submit" class="btn-primary" style="width: 100%; margin-top: 0.5rem">Sign In</button>
                <div class="toggle-auth">
                    Don't have an account? <a onclick="showRegister()">Register Company</a>
                </div>
            </form>

            <form id="registerForm" class="hidden">
                <div class="form-group">
                    <label>Company Name</label>
                    <input type="text" id="regCompany" required placeholder="e.g. Acme Corp">
                </div>
                <div class="form-group">
                    <label>User Name</label>
                    <input type="text" id="regUsername" required placeholder="e.g. acme_admin">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="regPass" required>
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" id="regPassConfirm" required>
                </div>
                <button type="submit" class="btn-primary" style="width: 100%">Register Company</button>
                <div class="toggle-auth">
                    Already have an account? <a onclick="showLogin()">Sign In</a>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Local Login/Register Logic for this page
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');

        function showRegister() {
            loginForm.classList.add('hidden');
            registerForm.classList.remove('hidden');
            document.querySelector('.brand-title').textContent = "IMS Register";
        }

        function showLogin() {
            registerForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
            document.querySelector('.brand-title').textContent = "IMS Login";
        }

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const u = document.getElementById('loginUser').value;
            const p = document.getElementById('loginPass').value;

            const result = app.login(u, p);
            if (result.success) {
                window.location.href = 'dashboard.html';
            } else {
                alert(result.message);
            }
        });

        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const company = document.getElementById('regCompany').value;
            const username = document.getElementById('regUsername').value;
            const p = document.getElementById('regPass').value;
            const cp = document.getElementById('regPassConfirm').value;

            if (p !== cp) return alert("Passwords do not match");

            const result = app.register(company, username, p);
            if (result.success) {
                alert(result.message);

                // WhatsApp Admin Notification
                const adminPhone = "+923330360487";
                const msg = `*New Registration Request*\n\n*Company:* ${company}\n*User Name:* ${username}\n\nPlease approve this account.`;
                const url = `https://wa.me/${adminPhone}?text=${encodeURIComponent(msg)}`;
                window.open(url, '_blank');

                showLogin();
            } else {
                alert(result.message);
            }
        });

        // Check if already logged in
        if (app.getCurrentUser()) {
            window.location.href = 'dashboard.html';
        }

        // Load Banner
        const bannerUrl = app.getBanner();
        if (bannerUrl) {
            document.getElementById('mainBanner').innerHTML = `<img src="${bannerUrl}" style="width: 100%; height: 100%; object-fit: cover;">`;
        }
    </script>
    <!-- WhatsApp Button -->
    <a href="https://wa.me/+923330360487" target="_blank" class="whatsapp-float">
        <svg viewBox="0 0 24 24" fill="white" width="32" height="32">
            <path
                d="M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.711 2.592 2.654-.696c1.005.572 2.173.894 3.402.894h.025c3.181 0 5.768-2.587 5.768-5.766.001-3.187-2.575-5.777-5.765-5.777zM12 18.608a6.6 6.6 0 0 1-3.237-.84l-.23-.137-2.712.71.724-2.616-.144-.236A6.64 6.64 0 0 1 5.398 11.96c.001-3.64 2.96-6.59 6.592-6.59s6.666 2.95 6.666 6.59-2.96 6.65-6.656 6.65z" />
        </svg>
    </a>
</body>

</html>